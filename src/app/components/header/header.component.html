<header class="header" [class.scrolled]="isScrolled" *ngIf="t$ | async as t">
  <div class="header-container">
    <div class="header-logo">
      <a routerLink="/" class="logo" (click)="closeMenu()">
        <div class="logo-icon">
          <!-- SVG logo as before -->
        </div>
        <span class="logo-text">{{ t.brand }}</span>
      </a>
    </div>

    <button
      class="mobile-menu-button"
      (click)="toggleMenu()"
      [attr.aria-expanded]="isMenuOpen"
      [attr.aria-label]="isMenuOpen ? 'Close menu' : 'Open menu'"
    >
      <div class="hamburger" [class.active]="isMenuOpen">
        <span></span><span></span><span></span>
      </div>
    </button>

    <nav class="header-nav" [class.open]="isMenuOpen">
      <div class="nav-links">
        <a
          routerLink="/"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="nav-link"
          (click)="closeMenu()"
        >
          <span class="nav-icon">üè†</span><span>{{ t.home }}</span>
        </a>

        <a
          routerLink="/polls"
          routerLinkActive="active"
          class="nav-link"
          (click)="closeMenu()"
        >
          <span class="nav-icon">üìä</span><span>{{ t.publicPolls }}</span>
        </a>

        <a
          *ngIf="isLoggedIn()"
          routerLink="/private-polls"
          routerLinkActive="active"
          class="nav-link"
          (click)="closeMenu()"
        >
          <span class="nav-icon">üîí</span><span>{{ t.myPolls }}</span>
        </a>

        <a
          routerLink="/create"
          routerLinkActive="active"
          class="nav-link create-link"
          (click)="closeMenu()"
        >
          <span class="nav-icon">‚ú®</span><span>{{ t.createPoll }}</span>
        </a>
      </div>

      <div class="auth-section">
        <!-- User is logged in -->
        <ng-container *ngIf="isLoggedIn(); else authButtons">
          <div class="user-menu">
            <div class="user-info">
              <div class="user-avatar-container">
                <div class="user-avatar">
                  <span class="avatar-text">{{ getUserInitials() }}</span>
                  <div class="avatar-ring"></div>
                </div>
                <div class="online-status"></div>
              </div>
              <div class="user-details">
                <span class="user-greeting">
                  {{ t.hello }}, {{ getUserFirstName() }}! üëã
                </span>
                <span class="user-email">{{ currentUser()?.email }}</span>
              </div>
            </div>

            <div class="user-actions">
              <button routerLink="/user-profile" class="action-button profile-button" title="Profile">
                <!-- profile icon -->
                <!-- ...svg... -->
              </button>
              <button
                class="action-button notifications-button"
                [title]="t.notifications"
              >
                <!-- notification icon -->
                <!-- ...svg... -->
                <span class="notification-badge">3</span>
              </button>
              <button class="logout-button" (click)="logout()" [title]="t.logout">
                <!-- ...svg... -->
                <span>{{ t.logout }}</span>
              </button>
            </div>
          </div>
        </ng-container>

        <!-- User is not logged in -->
        <ng-template #authButtons>
          <div class="auth-buttons">
            <a
              routerLink="/login"
              routerLinkActive="active"
              class="auth-button login-button"
              (click)="closeMenu()"
            >
              <!-- ...svg... -->
              <span>{{ t.login }}</span>
            </a>

            <a
              routerLink="/signup"
              routerLinkActive="active"
              class="auth-button signup-button"
              (click)="closeMenu()"
            >
              <!-- ...svg... -->
              <span>{{ t.signup }}</span>
            </a>
          </div>
        </ng-template>
      </div>
    </nav>
  </div>
</header>
